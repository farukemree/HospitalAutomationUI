<div class="admin-department-page">
  <h2>🏥 Departman Yönetimi</h2>

  <div class="actions">
    <fbutton
      [label]="'Yeni Departman Ekle'"
      (onClick)="showAddForm = true; cancelEdit()"
      class="btn"
    ></fbutton>
  </div>

  <!-- Yeni departman ekleme formu -->
  <div *ngIf="showAddForm" class="add-form">
    <input [(ngModel)]="newDepartmentName" placeholder="Departman adı girin" />

    <fbutton
      [label]="'Ekle'"
      (onClick)="addDepartment()"
      class="btn-add"
    ></fbutton>

    <fbutton
      [label]="'İptal'"
      (onClick)="showAddForm = false"
      class="btn"
    ></fbutton>
  </div>

  <ul>
    <li *ngFor="let dep of departments" class="department-item">

      <!-- Departman adı -->
      <span *ngIf="editDepartmentId !== dep.id">{{ dep.name }}</span>
      <input *ngIf="editDepartmentId === dep.id" [(ngModel)]="editDepartmentName" />

      <!-- Butonlar grubu -->
      <div class="btn-group">
        <fbutton
          *ngIf="!showAddForm && editDepartmentId !== dep.id"
          [label]="'Güncelle'"
          (onClick)="startEdit(dep)"
          class="btn-update"
        ></fbutton>

        <fbutton
          *ngIf="editDepartmentId === dep.id"
          [label]="'Kaydet'"
          (onClick)="updateDepartment(dep.id)"
          class="btn-save"
        ></fbutton>

        <fbutton
          *ngIf="editDepartmentId === dep.id"
          [label]="'İptal'"
          (onClick)="cancelEdit()"
          class="btn-cancel"
        ></fbutton>

        <fbutton
          *ngIf="!showAddForm && editDepartmentId !== dep.id"
          [label]="'Sil'"
          (onClick)="deleteDepartment(dep.id)"
          class="btn-delete"
        ></fbutton>
      </div>
    </li>
  </ul>
</div>
