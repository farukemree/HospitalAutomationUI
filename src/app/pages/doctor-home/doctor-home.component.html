<div class="doctor-container">
  <h2>HoÅŸ geldiniz, Dr. {{ doctor?.fullName }}</h2>

  <div class="info-card">
    <p><strong>UzmanlÄ±k:</strong> {{ doctor?.specialization }}</p>
    <p><strong>Telefon:</strong> {{ doctor?.phone }}</p>
    <p><strong>BÃ¶lÃ¼m ID:</strong> {{ doctor?.departmentId }}</p>
  </div>

  <div class="image-section" style="margin-top: 20px;">
    <h3>ğŸ–¼ï¸ Profil Resmi</h3>
    <div *ngIf="doctor?.imagePath; else noImage">
      <img [src]="'http://localhost:5073/' + doctor.imagePath" alt="Profil Resmi" width="200" height="200" style="border-radius: 10px; box-shadow: 0 0 8px rgba(0,0,0,0.2);" />
    </div>
    <ng-template #noImage>
      <p><em>HenÃ¼z profil resmi yÃ¼klenmemiÅŸ.</em></p>
    </ng-template>

    <div style="margin-top: 10px;">
      <input type="file" (change)="onFileSelected($event)" accept="image/*" />
      <button (click)="uploadImage()" style="margin-top: 5px;">ğŸ“¤ Resmi YÃ¼kle</button>
    </div>
  </div>
</div>

<hr />

<div class="action-card" style="margin-top: 30px;">
  <h2>ğŸ“Œ Doktor Ä°ÅŸlemleri</h2>
  <div class="button-grid" style="display: flex; gap: 10px; flex-wrap: wrap; align-items: center;">
    <button (click)="getDoctorInfo()">ğŸ”„ Bilgileri Yeniden YÃ¼kle</button>
    <button (click)="toggleEditMode()">âœï¸ Bilgileri GÃ¼ncelle</button>
    <button (click)="deleteDoctor()">ğŸ—‘ï¸ HesabÄ± Sil</button>
    <button (click)="getAllPatients()">ğŸ§‘â€ğŸ¤â€ğŸ§‘ HastalarÄ± Getir</button>
    <button (click)="goToAppointments()">ğŸ“… Randevulara Git</button>
    <button (click)="logout()">ğŸšª Ã‡Ä±kÄ±ÅŸ Yap</button>
  </div>
</div>

<!-- GÃ¼ncelleme Formu: sadece editMode true ise gÃ¶rÃ¼nÃ¼r -->
<div *ngIf="editMode" class="update-form" style="margin-top: 20px; border: 1px solid #ccc; padding: 15px; border-radius: 5px;">
  <form (ngSubmit)="updateDoctor()" #doctorForm="ngForm">

    <label>
      UzmanlÄ±k:
      <input type="text" [(ngModel)]="doctor.specialization" name="specialization" required />
    </label>

    <label>
      Telefon:
      <input type="text" [(ngModel)]="doctor.phone" name="phone" required />
    </label>

   <label>
  BÃ¶lÃ¼m ID:
  <input type="number" [(ngModel)]="doctor.departmentId" name="departmentId" />
</label>

    <button type="submit" [disabled]="doctorForm.invalid">ğŸ’¾ Kaydet</button>
  </form>
</div>

<hr />

<div class="patients-card" style="margin-top: 30px;">
  <h2>ğŸ©º HastalarÄ±m</h2>
  <ul *ngIf="patients.length > 0" class="patient-list" style="list-style:none; padding:0;">
    <li *ngFor="let patient of patients" style="padding:5px 0; border-bottom: 1px solid #ddd;">
      ğŸ‘¤ <strong>{{ patient.fullName }}</strong> |
      ğŸ‚ {{ patient.birthDate | date:'longDate' }} |
      âš§ï¸ {{ patient.gender }}
    </li>
  </ul>
  <p *ngIf="patients.length === 0" class="no-patients">
    HenÃ¼z hasta listesi yÃ¼klenmedi.
  </p>
</div>
