<div class="chat-layout">
  <!-- Sol Panel: Doktor listesi -->
  <div class="chat-sidebar">
    <h3>👨‍⚕️ Doktorlar</h3>
    <div 
      *ngFor="let doctor of doctorsWithLastMessage"
      class="chat-list-item"
      [class.active]="replyingToId === doctor.id"
      (click)="openConversation(doctor)">
      <div class="chat-list-name">{{ doctor.fullName }}</div>
      <div class="chat-list-last">{{ doctor.lastMessage || 'Henüz mesaj yok' }}</div>
      <div class="chat-list-time">{{ doctor.lastMessageTime | date:'shortTime' }}</div>
    </div>
  </div>

  <!-- Sağ Panel: Sohbet -->
  <div class="chat-main" *ngIf="replyingToId">
    <div class="chat-header">💬 {{ replyingToName }}</div>

    <div class="chat-messages" #chatContainer>
      <div *ngFor="let msg of conversation"
           [ngClass]="{'my-message': msg.senderId === patientId, 'other-message': msg.senderId !== patientId}">
        <strong>{{ msg.senderId === patientId ? 'Siz' : replyingToName }}:</strong>
        {{ msg.message }}
        <small>{{ msg.sentAt | date:'shortTime' }}</small>
      </div>
    </div>

    <div class="chat-input">
      <input type="text" [(ngModel)]="newMessage" placeholder="Mesajınızı yazın..." (keyup.enter)="sendMessage()" />
      <button (click)="sendMessage()">Gönder</button>
    </div>
  </div>

  <!-- Sağ Panel Boş Ekran -->
  <div class="chat-main empty" *ngIf="!replyingToId">
    <p>📩 Soldan bir doktor seçerek konuşmaya başlayabilirsiniz.</p>
  </div>
</div>
